{"version":3,"sources":["webpack://micser-common/webpack/universalModuleDefinition","webpack://micser-common/external \"react\"","webpack://micser-common/external \"styled-components\"","webpack://micser-common/external \"antd\"","webpack://micser-common/./src/components/Loader/Loader.js","webpack://micser-common/external \"axios\"","webpack://micser-common/external \"lodash/trimStart\"","webpack://micser-common/external \"lodash/trimEnd\"","webpack://micser-common/./src/hooks/useApi.js","webpack://micser-common/webpack/bootstrap","webpack://micser-common/webpack/startup","webpack://micser-common/webpack/runtime/compat get default export","webpack://micser-common/webpack/runtime/define property getters","webpack://micser-common/webpack/runtime/hasOwnProperty shorthand","webpack://micser-common/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","define","amd","self","require","Container","styled","Loader","tip","Spin","defaultProps","baseUrl","defaultMethod","autoLoad","onError","axios","useMemo","AxiosStatic","baseURL","withCredentials","useState","result","setResult","isLoading","setIsLoading","error","setError","resolveMethod","useCallback","method","toLowerCase","resolveUrl","url","trimEnd","trimStart","handleError","action","data","enableSetResult","get","params","post","put","Error","console","log","response","statusCode","message","useEffect","load","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value"],"mappings":"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","file":"main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"micser-common\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"micser-common\"] = factory();\n\telse\n\t\troot[\"micser-common\"] = factory();\n})(self, function() {\nreturn ","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"react\");;","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"styled-components\");;","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"antd\");;","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Spin } from \"antd\";\r\n\r\nconst Container = styled.div`\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n    z-index: 999;\r\n`;\r\n\r\nconst Loader = ({ tip }) => {\r\n    return (\r\n        <Container>\r\n            <Spin tip={tip} />\r\n        </Container>\r\n    );\r\n};\r\n\r\nLoader.defaultProps = {\r\n    tip: \"Loading...\",\r\n};\r\n\r\nexport default Loader;\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"axios\");;","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/trimStart\");;","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"lodash/trimEnd\");;","import { useCallback, useEffect, useMemo, useState } from \"react\";\r\nimport AxiosStatic from \"axios\";\r\nimport trimStart from \"lodash/trimStart\";\r\nimport trimEnd from \"lodash/trimEnd\";\r\n\r\nconst useApi = (baseUrl, { defaultMethod, onError, autoLoad } = { defaultMethod: \"get\", autoLoad: true }) => {\r\n    const axios = useMemo(\r\n        () =>\r\n            AxiosStatic.create({\r\n                baseURL: \"/api\",\r\n                withCredentials: true,\r\n            }),\r\n        []\r\n    );\r\n\r\n    const [result, setResult] = useState();\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState();\r\n\r\n    const resolveMethod = useCallback((method) => (method || defaultMethod || \"get\").toLowerCase(), [defaultMethod]);\r\n    const resolveUrl = useCallback((url) => (url ? trimEnd(baseUrl, \"/\") + \"/\" + trimStart(url, \"/\") : baseUrl), [\r\n        baseUrl,\r\n    ]);\r\n\r\n    const handleError = useCallback(\r\n        (error) => {\r\n            setError(error);\r\n            if (onError) {\r\n                onError(error);\r\n            }\r\n        },\r\n        [onError]\r\n    );\r\n\r\n    const action = useCallback(\r\n        async ({ data, action, method, setResult: enableSetResult } = {}) => {\r\n            let result = null;\r\n            setIsLoading(true);\r\n            try {\r\n                const url = resolveUrl(action);\r\n                switch (resolveMethod(method)) {\r\n                    case \"get\":\r\n                        result = await axios.get(url, {\r\n                            params: data,\r\n                        });\r\n                        break;\r\n                    case \"post\":\r\n                        result = await axios.post(url, data);\r\n                        break;\r\n                    case \"put\":\r\n                        result = await axios.put(url, data);\r\n                        break;\r\n                    case \"delete\":\r\n                        result = await axios.delete(url, {\r\n                            params: data,\r\n                        });\r\n                        break;\r\n                    default:\r\n                        throw new Error(\"Invalid method\");\r\n                }\r\n                if (enableSetResult) {\r\n                    setResult(result.data);\r\n                }\r\n            } catch (error) {\r\n                console.log(error);\r\n                handleError(\r\n                    error.response && error.response.data\r\n                        ? error.response.data\r\n                        : { statusCode: 500, message: \"Unknown error.\" }\r\n                );\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n            return result;\r\n        },\r\n        [resolveUrl, resolveMethod, axios, handleError]\r\n    );\r\n\r\n    useEffect(() => {\r\n        if (autoLoad) {\r\n            action({ setResult: true });\r\n        }\r\n    }, [action, autoLoad]);\r\n\r\n    return { result, load: action, isLoading, error };\r\n};\r\n\r\nexport default useApi;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(900);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}